<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="HojaDeRuta" language="groovy" pageWidth="595" pageHeight="842" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="10" bottomMargin="0">
	<property name="ireport.zoom" value="2.0"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<parameter name="numeroHdr" class="java.lang.Integer"/>
	<parameter name="SUBREPORT_DIR" class="java.lang.String" isForPrompting="false">
		<defaultValueExpression><![CDATA["C:\\src\\hojasDeRuta\\"]]></defaultValueExpression>
	</parameter>
	<queryString>
		<![CDATA[select hdr.listadoNumero,(select listadosdemateriales.revision from listadosdemateriales where listadosdemateriales.numero=hdr.listadoNumero)as rev,(select unidades.descripcion from unidades where numero=hdr.numeroVehiculo),(select unidades.descripcion from unidades where numero=hdr.numeroVehiculo)as descV,round(hdr.pesoCarga,2) as pesoTot,(select unidades.kilometrosActuales from unidades where numero=hdr.numeroVehiculo),(select fleteros.nombre from fleteros where numero=hdr.numeroFletero),(select fleteros.celular from fleteros where numero=hdr.numeroFletero),left(replace(hdr.fechaEntrega,"/",""),4)as fechaTit,left((select unidades.descripcion from unidades where numero=hdr.numeroVehiculo),5)as nombreV,substring((select unidades.descripcion from unidades where numero=hdr.numeroVehiculo),6)as turnoV from hdr where numero=$P{numeroHdr}]]>
	</queryString>
	<field name="listadoNumero" class="java.lang.Integer"/>
	<field name="rev" class="java.lang.Integer"/>
	<field name="(select unidades.descripcion from unidades where numero=hdr.numeroVehiculo)" class="java.lang.String"/>
	<field name="descV" class="java.lang.String"/>
	<field name="pesoTot" class="java.lang.Double"/>
	<field name="(select unidades.kilometrosActuales from unidades where numero=hdr.numeroVehiculo)" class="java.lang.Integer"/>
	<field name="(select fleteros.nombre from fleteros where numero=hdr.numeroFletero)" class="java.lang.String"/>
	<field name="(select fleteros.celular from fleteros where numero=hdr.numeroFletero)" class="java.lang.String"/>
	<field name="fechaTit" class="java.lang.String"/>
	<field name="nombreV" class="java.lang.String"/>
	<field name="turnoV" class="java.lang.String"/>
	<background>
		<band splitType="Stretch"/>
	</background>
	<title>
		<band height="26" splitType="Stretch">
			<line>
				<reportElement x="0" y="0" width="555" height="1"/>
			</line>
			<line>
				<reportElement x="1" y="21" width="555" height="1"/>
			</line>
			<textField>
				<reportElement x="206" y="1" width="33" height="20"/>
				<textElement/>
				<textFieldExpression><![CDATA[$F{fechaTit}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="178" y="1" width="28" height="20"/>
				<textElement/>
				<textFieldExpression><![CDATA[$F{nombreV}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="239" y="1" width="52" height="20"/>
				<textElement/>
				<textFieldExpression><![CDATA["-"+$F{turnoV}]]></textFieldExpression>
			</textField>
		</band>
	</title>
	<pageHeader>
		<band height="68" splitType="Stretch">
			<line>
				<reportElement x="0" y="0" width="555" height="1"/>
				<graphicElement>
					<pen lineStyle="Double"/>
				</graphicElement>
			</line>
			<textField pattern="dd/MM/yyyy h.mm a">
				<reportElement x="423" y="1" width="132" height="20"/>
				<textElement>
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA["impresion HDR: "+new java.util.Date()]]></textFieldExpression>
			</textField>
			<rectangle radius="10">
				<reportElement x="405" y="25" width="150" height="39"/>
			</rectangle>
			<textField>
				<reportElement x="1" y="15" width="191" height="13"/>
				<textElement>
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA["Vehiculo :"+$F{(select unidades.descripcion from unidades where numero=hdr.numeroVehiculo)}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="1" y="28" width="191" height="14"/>
				<textElement>
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA["Listado de Preparacion NÂº :"+$F{listadoNumero}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="423" y="28" width="132" height="14"/>
				<textElement>
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA["Operador :"+$F{(select fleteros.nombre from fleteros where numero=hdr.numeroFletero)}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="423" y="44" width="132" height="15"/>
				<textElement>
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA["Celular :"+$F{(select fleteros.celular from fleteros where numero=hdr.numeroFletero)}]]></textFieldExpression>
			</textField>
			<textField pattern="###0.00;-###0.00">
				<reportElement x="1" y="42" width="191" height="17"/>
				<textElement>
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA["Peso Total Kg.:"+$F{pesoTot}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="218" y="28" width="100" height="14"/>
				<textElement>
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{rev}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="192" y="28" width="26" height="14"/>
				<textElement>
					<font size="8"/>
				</textElement>
				<text><![CDATA[Rev. /]]></text>
			</staticText>
		</band>
	</pageHeader>
	<columnHeader>
		<band height="38" splitType="Stretch">
			<rectangle>
				<reportElement x="0" y="0" width="555" height="37"/>
			</rectangle>
			<staticText>
				<reportElement x="0" y="20" width="192" height="17"/>
				<textElement>
					<font size="8"/>
				</textElement>
				<text><![CDATA[Kilometros Llegada : ________________]]></text>
			</staticText>
			<staticText>
				<reportElement x="192" y="0" width="108" height="20"/>
				<textElement>
					<font size="8"/>
				</textElement>
				<text><![CDATA[Reviso :________________]]></text>
			</staticText>
			<staticText>
				<reportElement x="192" y="20" width="108" height="17"/>
				<textElement>
					<font size="8"/>
				</textElement>
				<text><![CDATA[Recibio : ________________]]></text>
			</staticText>
			<staticText>
				<reportElement x="408" y="0" width="147" height="20"/>
				<textElement>
					<font size="8"/>
				</textElement>
				<text><![CDATA[Auxiliar :_______________]]></text>
			</staticText>
			<textField>
				<reportElement x="1" y="0" width="191" height="20"/>
				<textElement>
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA["Kilometros Salida :"+$F{(select unidades.kilometrosActuales from unidades where numero=hdr.numeroVehiculo)}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="300" y="0" width="108" height="20"/>
				<textElement>
					<font size="8"/>
				</textElement>
				<text><![CDATA[H. Salida:______________]]></text>
			</staticText>
			<staticText>
				<reportElement x="300" y="20" width="108" height="17"/>
				<textElement>
					<font size="8"/>
				</textElement>
				<text><![CDATA[H. Llegada:______________]]></text>
			</staticText>
		</band>
	</columnHeader>
	<detail>
		<band height="204" splitType="Stretch">
			<subreport>
				<reportElement x="0" y="0" width="555" height="183"/>
				<subreportParameter name="numeroHdr">
					<subreportParameterExpression><![CDATA[$P{numeroHdr}]]></subreportParameterExpression>
				</subreportParameter>
				<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
				<subreportExpression><![CDATA["C:\\src\\hojasDeRuta\\DetalleHdr.jasper"]]></subreportExpression>
			</subreport>
			<textField>
				<reportElement x="383" y="184" width="173" height="20"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="12" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$P{numeroHdr}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<columnFooter>
		<band height="45" splitType="Stretch"/>
	</columnFooter>
</jasperReport>
